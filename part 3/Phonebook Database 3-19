app.get('/api/persons/:id', (req, res, next) => {
  const id = req.params.id;

  // Find the person by ID in the database
  Person.findById(id)
    .then(person => {
      if (person) {
        res.json(person);
      } else {
        res.status(404).end(); // Entry not found
      }
    })
    .catch(error => {
      // Handle the error and pass it to the error handling middleware
      next(error);
    });
});

app.get('/info', (req, res, next) => {
  // Get the count of phonebook entries from the database
  Person.countDocuments({})
    .then(count => {
      res.send(`
        <p>Phonebook has info for ${count} people</p>
        <p>${new Date()}</p>
      `);
    })
    .catch(error => {
      // Handle the error and pass it to the error handling middleware
      next(error);
    });
});
