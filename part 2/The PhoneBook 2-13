// api.js

const BASE_URL = '/api'; // Adjust this URL according to your server setup

// Function to add a contact
export async function addContact(name, phoneNumber) {
  try {
    const response = await fetch(`${BASE_URL}/add-contact`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ name, phoneNumber }),
    });

    if (response.ok) {
      return await response.json();
    } else {
      throw new Error('Failed to add contact');
    }
  } catch (error) {
    throw new Error('Network error: ' + error.message);
  }
}

// Function to retrieve contacts
export async function getContacts() {
  try {
    const response = await fetch(`${BASE_URL}/get-contacts`);

    if (response.ok) {
      return await response.json();
    } else {
      throw new Error('Failed to fetch contacts');
    }
  } catch (error) {
    throw new Error('Network error: ' + error.message);
  }
}



// phonebook.js

import { addContact, getContacts } from './api.js';

// Assuming you have a form with input fields for name and phone number
const form = document.querySelector('#phonebook-form');

form.addEventListener('submit', async (e) => {
  e.preventDefault();

  const name = document.querySelector('#name-input').value;
  const phoneNumber = document.querySelector('#phone-input').value;

  try {
    // Use the addContact function from the api module
    const result = await addContact(name, phoneNumber);

    // Handle the result, update the UI as needed
    console.log('Contact added:', result);

    // Refresh the contact list (assuming you have a function for this)
    refreshContactList();
  } catch (error) {
    console.error('Error:', error);
  }
});

// Function to refresh the contact list
async function refreshContactList() {
  try {
    // Use the getContacts function from the api module
    const contacts = await getContacts();

    // Update the UI with the retrieved contacts
    console.log('Contacts:', contacts);

    // Update the contact list in your UI
    // Example: displayContacts(contacts);
  } catch (error) {
    console.error('Error:', error);
  }
}
