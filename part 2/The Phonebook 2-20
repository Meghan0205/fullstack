// Add this code inside the `displayCountryDetails` function

async function displayCountryDetails(country) {
    clearResults();
    const { name, capital, area, flags, languages } = country;
    const div = document.createElement('div');
    div.innerHTML = `
        <h2>${name.common}</h2>
        <p><strong>Capital:</strong> ${capital}</p>
        <p><strong>Area:</strong> ${area} square kilometers</p>
        <p><strong>Languages:</strong> ${Object.values(languages).join(', ')}</p>
        <img src="${flags.png}" alt="${name.common} flag" width="200">
        <div id="weather-info"></div>
    `;
    countryDetailsContainer.appendChild(div);

    // Fetch weather data and display it
    const weatherInfo = await fetchWeatherInfo(capital);
    displayWeatherInfo(weatherInfo);
}

async function fetchWeatherInfo(city) {
    try {
        const apiKey = import.meta.env.VITE_OPENWEATHER_API_KEY; // Use your environment variable here
        const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`);
        if (!response.ok) {
            throw new Error('Weather data not available');
        }
        const data = await response.json();
        return {
            temperature: data.main.temp,
            description: data.weather[0].description,
        };
    } catch (error) {
        console.error('Weather Error:', error);
        return null;
    }
}

function displayWeatherInfo(weatherInfo) {
    const weatherInfoContainer = document.getElementById('weather-info');
    if (weatherInfo) {
        const { temperature, description } = weatherInfo;
        weatherInfoContainer.innerHTML = `
            <p><strong>Temperature:</strong> ${temperature}Â°C</p>
            <p><strong>Weather:</strong> ${description}</p>
        `;
    } else {
        weatherInfoContainer.innerHTML = `<p>Weather data not available</p>`;
    }
}
