const tokenExtractor = (req, res, next) => {
  const authorizationHeader = req.get('Authorization');

  if (authorizationHeader && authorizationHeader.toLowerCase().startsWith('bearer ')) {
    req.token = authorizationHeader.substring(7); // Remove 'Bearer ' from the token string
  }

  next();
};

module.exports = tokenExtractor;


const express = require('express');
const app = express();
const tokenExtractor = require('./middleware/tokenExtractor'); // Import your tokenExtractor middleware
const jwt = require('jsonwebtoken');
const Blog = require('./models/blog'); // Adjust the path to your Blog model

app.use(express.json());
app.use(tokenExtractor); // Use the tokenExtractor middleware

// Your routes go here

app.post('/api/blogs', authenticateUser, async (req, res) => {
  const decodedToken = jwt.verify(req.token, process.env.SECRET);
  // ...
});

// ...

const PORT = process.env.PORT || 3001;
app.listen(PORT, () => {
  console.log(`Server is running on port ${PORT}`);
});
